!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}([function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("zlib")},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],s=i.obj[i.prop],a=Object.keys(s),u=0;u<a.length;++u){var c=a[u],l=s[c];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:s,prop:c}),r.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var o="",s=0;s<n.length;++s){var a=n.charCodeAt(s);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?o+=n.charAt(s):a<128?o+=i[a]:a<2048?o+=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?o+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(s+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(s)),o+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return o(t)&&!o(r)&&(a=s(t,i)),o(t)&&o(r)?(r.forEach((function(r,o){if(n.call(t,o)){var s=t[o];s&&"object"==typeof s&&r&&"object"==typeof r?t[o]=e(s,r,i):t.push(r)}else t[o]=r})),t):Object.keys(r).reduce((function(t,o){var s=r[o];return n.call(t,o)?t[o]=e(t[o],s,i):t[o]=s,t}),a)}}},function(e,t){e.exports=require("http")},function(e,t){e.exports=e=>{const t={};let r;if(!(e instanceof Object)||Array.isArray(e))throw new Error("Keymirror(...): Argument must be an object.");for(r in e)e.hasOwnProperty(r)&&(t[r]=r);return t}},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,i=r(3),s={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:s.RFC3986,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}}},s)},function(e,t){e.exports={baseURL:"https://5f6928e5dc0bff0016f443a3.mockapi.io/api/v1/"}},function(e,t,r){const n=r(17),o=r(18);e.exports={clearNumber:e=>e.toString().replace(/\D+/g,""),parseErrorObject:e=>{let t="";if(!n.plainObject(e))return t;try{Array.isArray(e.errors)?t=e.errors[0].message:n.plainObject(e.error)?t=e.error.message:e.error&&e.error_description&&(t=e.error_description)}catch(e){console.error(e)}return t},sortObject:e=>Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{}),getTimestamp:e=>o(e).valueOf()}},function(e,t){e.exports=require("https")},function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const a=r(11),u=r(5),{request:c}=r(12),{baseURL:l}=r(7),f={createUser:{method:"POST",endpoint:"users"},getUser:{method:"GET",endpoint:"users?search={email}"},getUserById:{method:"GET",endpoint:"users/{id}"},getPurchases:{method:"GET",endpoint:"users/{id}/purchases"},createPurchases:{method:"POST",endpoint:"users/{id}/purchases"}},d=u(f),p=e=>`${l}${e}`;e.exports={client:async function(e,t){let{payload:r}=t,n=s(t,["payload"]);const i=f[e];return c({url:a(p(i.endpoint),o({},n)),headers:{"Content-Type":"application/json"},method:i.method,payload:r,type:"JSON"})},endpoints:d}},function(e,t,r){(function(t){"use strict";function r(e){var t=new Error(e);return t.name="ValueError",t}function n(e){return function(t){var n=Array.prototype.slice.call(arguments,1),o=0,i="UNDEFINED";return t.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,(function(t,s,a,u){if(null!=s)return s;var c=a;if(c.length>0){if("IMPLICIT"===i)throw r("cannot switch from implicit to explicit numbering");i="EXPLICIT"}else{if("EXPLICIT"===i)throw r("cannot switch from explicit to implicit numbering");i="IMPLICIT",c=String(o),o+=1}var l=c.split("."),f=(/^\d+$/.test(l[0])?l:["0"].concat(l)).reduce((function(e,t){return e.reduce((function(e,r){return null!=r&&t in Object(r)?["function"==typeof r[t]?r[t]():r[t]]:[]}),[])}),[n]).reduce((function(e,t){return t}),"");if(null==u)return f;if(Object.prototype.hasOwnProperty.call(e,u))return e[u](f);throw r('no transformer named "'+u+'"')}))}}var o=n({});o.create=n,o.extend=function(e,r){var o=n(r);e.format=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),o.apply(t,e)}},e.exports=o}).call(this,this)},function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const i=r(13),s=r(14),{baseURL:a}=r(7),{parseErrorObject:u}=r(8);e.exports={request:e=>{if(!e)throw new Error("The action parameter is required");const t={JSON:"application/json",urlencoded:"application/x-www-form-urlencoded"},r=[];if(e.endpoint||e.url||r.push("`an url` or `endpoint`"),e.type&&!t[e.type]&&r.push("`a valid type`"),r.length)throw new Error("Error! You must pass "+r.join(", "));const c=e.type||"urlencoded",l=e.url||`${a}${e.endpoint||""}`,f={body:void 0,headers:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({Accept:"application/json","Content-Type":t[c]},e.headers),method:e.method||"GET"};return e.payload&&"JSON"===c?f.body=e.payload:"GET"!==f.method&&e.payload&&(f.body=s.stringify(e.payload)),i(l,f).then(async e=>{if(e.status>299){const t=await e.json(),r=u(t),n=new Error(r||({100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"}[""+e.status]||""));throw n.response=t,n.status=e.status,n}const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():e.text()})},parseResponseError:(e,t=0)=>400===t?"Problemas com o servidor. Tente novamente mais tarde.":!e||e.includes("ajax error")?"Algum erro ocorreu. Por favor, verifique sua conexão ou tente novamente.":e}},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return D})),r.d(t,"Request",(function(){return z})),r.d(t,"Response",(function(){return B})),r.d(t,"FetchError",(function(){return d}));var n=r(0),o=r(4),i=r(2),s=r(9),a=r(1);const u=n.Readable,c=Symbol("buffer"),l=Symbol("type");class f{constructor(){this[l]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,o=Number(t.length);for(let e=0;e<o;e++){const o=t[e];let i;i=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof f?o[c]:Buffer.from("string"==typeof o?o:String(o)),n+=i.length,r.push(i)}}this[c]=Buffer.concat(r);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[l]=o)}get size(){return this[c].length}get type(){return this[l]}text(){return Promise.resolve(this[c].toString())}arrayBuffer(){const e=this[c],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new u;return e._read=function(){},e.push(this[c]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,o;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),o=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const i=Math.max(o-n,0),s=this[c].slice(n,n+i),a=new f([],{type:arguments[2]});return a[c]=s,a}}function d(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let p;Object.defineProperties(f.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(f.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="FetchError";try{p=require("encoding").convert}catch(e){}const h=Symbol("Body internals"),y=n.PassThrough;function b(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.size;let i=void 0===o?0:o;var s=r.timeout;let a=void 0===s?0:s;null==e?e=null:g(e)?e=Buffer.from(e.toString()):v(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof n||(e=Buffer.from(String(e)))),this[h]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=a,e instanceof n&&e.on("error",(function(e){const r="AbortError"===e.name?e:new d(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[h].error=r}))}function m(){var e=this;if(this[h].disturbed)return b.Promise.reject(new TypeError("body used already for: "+this.url));if(this[h].disturbed=!0,this[h].error)return b.Promise.reject(this[h].error);let t=this.body;if(null===t)return b.Promise.resolve(Buffer.alloc(0));if(v(t)&&(t=t.stream()),Buffer.isBuffer(t))return b.Promise.resolve(t);if(!(t instanceof n))return b.Promise.resolve(Buffer.alloc(0));let r=[],o=0,i=!1;return new b.Promise((function(n,s){let a;e.timeout&&(a=setTimeout((function(){i=!0,s(new d(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(i=!0,s(t)):s(new d(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!i&&null!==t){if(e.size&&o+t.length>e.size)return i=!0,void s(new d(`content size at ${e.url} over limit: ${e.size}`,"max-size"));o+=t.length,r.push(t)}})),t.on("end",(function(){if(!i){clearTimeout(a);try{n(Buffer.concat(r,o))}catch(t){s(new d(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function g(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function v(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function O(e){let t,r,o=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof n&&"function"!=typeof o.getBoundary&&(t=new y,r=new y,o.pipe(t),o.pipe(r),e[h].body=t,o=r),o}function w(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":g(e)?"application/x-www-form-urlencoded;charset=UTF-8":v(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():e instanceof n?null:"text/plain;charset=UTF-8"}function j(e){const t=e.body;return null===t?0:v(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}b.prototype={get body(){return this[h].body},get bodyUsed(){return this[h].disturbed},arrayBuffer(){return m.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return m.call(this).then((function(t){return Object.assign(new f([],{type:e.toLowerCase()}),{[c]:t})}))},json(){var e=this;return m.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return b.Promise.reject(new d(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return m.call(this).then((function(e){return e.toString()}))},buffer(){return m.call(this)},textConverted(){var e=this;return m.call(this).then((function(t){return function(e,t){if("function"!=typeof p)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,o,i="utf-8";r&&(n=/charset=([^;]*)/i.exec(r));o=e.slice(0,1024).toString(),!n&&o&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(o));!n&&o&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),n||(n=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o),n&&n.pop()),n&&(n=/charset=(.*)/i.exec(n.pop())));!n&&o&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o));n&&(i=n.pop(),"gb2312"!==i&&"gbk"!==i||(i="gb18030"));return p(e,"UTF-8",i).toString()}(t,e.headers)}))}},Object.defineProperties(b.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),b.mixIn=function(e){for(const t of Object.getOwnPropertyNames(b.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(b.prototype,t);Object.defineProperty(e,t,r)}},b.Promise=global.Promise;const S=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,P=/[^\t\x20-\x7e\x80-\xff]/;function T(e){if(e=""+e,S.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")}function x(e){if(e=""+e,P.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function E(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const $=Symbol("map");class D{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[$]=Object.create(null),e instanceof D){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){T(e=""+e);const t=E(this[$],e);return void 0===t?null:this[$][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=A(this),n=0;for(;n<r.length;){var o=r[n];const i=o[0],s=o[1];e.call(t,s,i,this),r=A(this),n++}}set(e,t){t=""+t,T(e=""+e),x(t);const r=E(this[$],e);this[$][void 0!==r?r:e]=[t]}append(e,t){t=""+t,T(e=""+e),x(t);const r=E(this[$],e);void 0!==r?this[$][r].push(t):this[$][e]=[t]}has(e){return T(e=""+e),void 0!==E(this[$],e)}delete(e){T(e=""+e);const t=E(this[$],e);void 0!==t&&delete this[$][t]}raw(){return this[$]}keys(){return k(this,"key")}values(){return k(this,"value")}[Symbol.iterator](){return k(this,"key+value")}}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[$]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[$][t].join(", ")}:function(t){return[t.toLowerCase(),e[$][t].join(", ")]})}D.prototype.entries=D.prototype[Symbol.iterator],Object.defineProperty(D.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(D.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const C=Symbol("internal");function k(e,t){const r=Object.create(N);return r[C]={target:e,kind:t,index:0},r}const N=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==N)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[C];const t=e.target,r=e.kind,n=e.index,o=A(t,r);return n>=o.length?{value:void 0,done:!0}:(this[C].index=n+1,{value:o[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function M(e){const t=Object.assign({__proto__:null},e[$]),r=E(e[$],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(N,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const L=Symbol("Response internals"),R=o.STATUS_CODES;class B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b.call(this,e,t);const r=t.status||200,n=new D(t.headers);if(null!=e&&!n.has("Content-Type")){const t=w(e);t&&n.append("Content-Type",t)}this[L]={url:t.url,status:r,statusText:t.statusText||R[r],headers:n,counter:t.counter}}get url(){return this[L].url||""}get status(){return this[L].status}get ok(){return this[L].status>=200&&this[L].status<300}get redirected(){return this[L].counter>0}get statusText(){return this[L].statusText}get headers(){return this[L].headers}clone(){return new B(O(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}b.mixIn(B.prototype),Object.defineProperties(B.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(B.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const I=Symbol("Request internals"),U=i.parse,_=i.format,H="destroy"in n.Readable.prototype;function F(e){return"object"==typeof e&&"object"==typeof e[I]}class z{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F(e)?t=U(e.url):(t=e&&e.href?U(e.href):U(""+e),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||F(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=r.body?r.body:F(e)&&null!==e.body?O(e):null;b.call(this,o,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const i=new D(r.headers||e.headers||{});if(null!=o&&!i.has("Content-Type")){const e=w(o);e&&i.append("Content-Type",e)}let s=F(e)?e.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[I]={method:n,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:t,signal:s},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[I].method}get url(){return _(this[I].parsedURL)}get headers(){return this[I].headers}get redirect(){return this[I].redirect}get signal(){return this[I].signal}clone(){return new z(this)}}function q(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}b.mixIn(z.prototype),Object.defineProperty(z.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(z.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),q.prototype=Object.create(Error.prototype),q.prototype.constructor=q,q.prototype.name="AbortError";const V=n.PassThrough,G=i.resolve;function J(e,t){if(!J.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return b.Promise=J.Promise,new J.Promise((function(r,i){const u=new z(e,t),c=function(e){const t=e[I].parsedURL,r=new D(e[I].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof n.Readable&&!H)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let o=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(o="0"),null!=e.body){const t=j(e);"number"==typeof t&&(o=String(t))}o&&r.set("Content-Length",o),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return"function"==typeof i&&(i=i(t)),r.has("Connection")||i||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:M(r),agent:i})}(u),l=("https:"===c.protocol?s:o).request,f=u.signal;let p=null;const h=function(){let e=new q("The user aborted a request.");i(e),u.body&&u.body instanceof n.Readable&&u.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(f&&f.aborted)return void h();const y=function(){h(),g()},b=l(c);let m;function g(){b.abort(),f&&f.removeEventListener("abort",y),clearTimeout(m)}f&&f.addEventListener("abort",y),u.timeout&&b.once("socket",(function(e){m=setTimeout((function(){i(new d("network timeout at: "+u.url,"request-timeout")),g()}),u.timeout)})),b.on("error",(function(e){i(new d(`request to ${u.url} failed, reason: ${e.message}`,"system",e)),g()})),b.on("response",(function(e){clearTimeout(m);const t=function(e){const t=new D;for(const r of Object.keys(e))if(!S.test(r))if(Array.isArray(e[r]))for(const n of e[r])P.test(n)||(void 0===t[$][r]?t[$][r]=[n]:t[$][r].push(n));else P.test(e[r])||(t[$][r]=[e[r]]);return t}(e.headers);if(J.isRedirect(e.statusCode)){const n=t.get("Location"),o=null===n?null:G(u.url,n);switch(u.redirect){case"error":return i(new d("uri requested responds with a redirect, redirect mode is set to error: "+u.url,"no-redirect")),void g();case"manual":if(null!==o)try{t.set("Location",o)}catch(e){i(e)}break;case"follow":if(null===o)break;if(u.counter>=u.follow)return i(new d("maximum redirect reached at: "+u.url,"max-redirect")),void g();const n={headers:new D(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:u.body,signal:u.signal,timeout:u.timeout,size:u.size};return 303!==e.statusCode&&u.body&&null===j(u)?(i(new d("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void g()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==u.method)||(n.method="GET",n.body=void 0,n.headers.delete("content-length")),r(J(new z(o,n))),void g())}}e.once("end",(function(){f&&f.removeEventListener("abort",y)}));let n=e.pipe(new V);const o={url:u.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:u.size,timeout:u.timeout,counter:u.counter},s=t.get("Content-Encoding");if(!u.compress||"HEAD"===u.method||null===s||204===e.statusCode||304===e.statusCode)return p=new B(n,o),void r(p);const c={flush:a.Z_SYNC_FLUSH,finishFlush:a.Z_SYNC_FLUSH};if("gzip"==s||"x-gzip"==s)return n=n.pipe(a.createGunzip(c)),p=new B(n,o),void r(p);if("deflate"!=s&&"x-deflate"!=s){if("br"==s&&"function"==typeof a.createBrotliDecompress)return n=n.pipe(a.createBrotliDecompress()),p=new B(n,o),void r(p);p=new B(n,o),r(p)}else{e.pipe(new V).once("data",(function(e){n=8==(15&e[0])?n.pipe(a.createInflate()):n.pipe(a.createInflateRaw()),p=new B(n,o),r(p)}))}})),function(e,t){const r=t.body;null===r?e.end():v(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(b,u)}))}J.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},J.Promise=global.Promise,t.default=J},function(e,t,r){"use strict";var n=r(15),o=r(16),i=r(6);e.exports={formats:i,parse:o,stringify:n}},function(e,t,r){"use strict";var n=r(3),o=r(6),i=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,a(t)?t:[t])},l=Date.prototype.toISOString,f=o.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:f,formatter:o.formatters[f],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,r,o,i,s,u,l,f,p,h,y,b,m){var g,v=t;if("function"==typeof l?v=l(r,v):v instanceof Date?v=h(v):"comma"===o&&a(v)&&(v=n.maybeMap(v,(function(e){return e instanceof Date?h(e):e})).join(",")),null===v){if(i)return u&&!b?u(r,d.encoder,m,"key"):r;v=""}if("string"==typeof(g=v)||"number"==typeof g||"boolean"==typeof g||"symbol"==typeof g||"bigint"==typeof g||n.isBuffer(v))return u?[y(b?r:u(r,d.encoder,m,"key"))+"="+y(u(v,d.encoder,m,"value"))]:[y(r)+"="+y(String(v))];var O,w=[];if(void 0===v)return w;if(a(l))O=l;else{var j=Object.keys(v);O=f?j.sort(f):j}for(var S=0;S<O.length;++S){var P=O[S],T=v[P];if(!s||null!==T){var x=a(v)?"function"==typeof o?o(r,P):r:r+(p?"."+P:"["+P+"]");c(w,e(T,x,o,i,s,u,l,f,p,h,y,b,m))}}return w};e.exports=function(e,t){var r,n=e,u=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!i.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],s=d.filter;return("function"==typeof e.filter||a(e.filter))&&(s=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:s,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof u.filter?n=(0,u.filter)("",n):a(u.filter)&&(r=u.filter);var l,f=[];if("object"!=typeof n||null===n)return"";l=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=s[l];r||(r=Object.keys(n)),u.sort&&r.sort(u.sort);for(var y=0;y<r.length;++y){var b=r[y];u.skipNulls&&null===n[b]||c(f,p(n[b],b,h,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var m=f.join(u.delimiter),g=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),m.length>0?g+m:""}},function(e,t,r){"use strict";var n=r(3),o=Object.prototype.hasOwnProperty,i=Array.isArray,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(i),c=a?i.slice(0,a.index):i,l=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;l.push(c)}for(var f=0;r.depth>0&&null!==(a=s.exec(i))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(a[1])}return a&&l.push("["+i.slice(a.index)+"]"),function(e,t,r,n){for(var o=n?t:u(t,r),i=e.length-1;i>=0;--i){var s,a=e[i];if("[]"===a&&r.parseArrays)s=[].concat(o);else{s=r.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,l=parseInt(c,10);r.parseArrays||""!==c?!isNaN(l)&&a!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(s=[])[l]=o:s[c]=o:s={0:o}}o=s}return o}(l,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var r,c={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,f),p=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?h="utf-8":"utf8=%26%2310003%3B"===d[r]&&(h="iso-8859-1"),p=r,r=d.length);for(r=0;r<d.length;++r)if(r!==p){var y,b,m=d[r],g=m.indexOf("]="),v=-1===g?m.indexOf("="):g+1;-1===v?(y=t.decoder(m,s.decoder,h,"key"),b=t.strictNullHandling?null:""):(y=t.decoder(m.slice(0,v),s.decoder,h,"key"),b=n.maybeMap(u(m.slice(v+1),t),(function(e){return t.decoder(e,s.decoder,h,"value")}))),b&&t.interpretNumericEntities&&"iso-8859-1"===h&&(b=a(b)),m.indexOf("[]=")>-1&&(b=i(b)?[b]:b),o.call(c,y)?c[y]=n.combine(c[y],b):c[y]=b}return c}(e,r):e,f=r.plainObjects?Object.create(null):{},d=Object.keys(l),p=0;p<d.length;++p){var h=d[p],y=c(h,l[h],r,"string"==typeof e);f=n.merge(f,y,r)}return n.compact(f)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getObjectType=void 0,t.getObjectType=function(e){return Object.prototype.toString.call(e).slice(8,-1)};var n=function(e){return function(r){return t.getObjectType(r)===e}},o=function(e){return function(t){return typeof t===e}},i=function(e){switch(e){case null:return"null";case!0:case!1:return"boolean"}switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"bigint":return"bigint";case"symbol":return"symbol"}if(i.array(e))return"Array";if(i.plainFunction(e))return"Function";var r=t.getObjectType(e);return r||"Object"};i.array=Array.isArray,i.arrayOf=function(e,t){return!(!i.array(e)&&!i.function(t))&&e.every((function(e){return t(e)}))},i.asyncFunction=n("AsyncFunction"),i.boolean=function(e){return!0===e||!1===e},i.date=n("Date"),i.defined=function(e){return!i.undefined(e)},i.domElement=function(e){return i.object(e)&&!i.plainObject(e)&&1===e.nodeType&&i.string(e.nodeName)&&["innerHTML","ownerDocument","style","attributes","nodeValue"].every((function(t){return t in e}))},i.empty=function(e){return i.string(e)&&0===e.length||i.array(e)&&0===e.length||i.object(e)&&!i.map(e)&&!i.set(e)&&0===Object.keys(e).length||i.set(e)&&0===e.size||i.map(e)&&0===e.size},i.error=n("Error"),i.function=o("function"),i.generator=function(e){return i.iterable(e)&&i.function(e.next)&&i.function(e.throw)},i.generatorFunction=n("GeneratorFunction"),i.instanceOf=function(e,t){return!(!e||!t)&&Object.getPrototypeOf(e)===t.prototype},i.iterable=function(e){return!i.nullOrUndefined(e)&&i.function(e[Symbol.iterator])},i.map=n("Map"),i.nan=function(e){return Number.isNaN(e)},i.null=function(e){return null===e},i.nullOrUndefined=function(e){return i.null(e)||i.undefined(e)},i.number=function(e){return o("number")(e)&&!i.nan(e)},i.numericString=function(e){return i.string(e)&&e.length>0&&!Number.isNaN(Number(e))},i.object=function(e){return!i.nullOrUndefined(e)&&(i.function(e)||"object"==typeof e)},i.oneOf=function(e,t){return!!i.array(e)&&e.indexOf(t)>-1},i.plainFunction=n("Function"),i.plainObject=function(e){if("Object"!==t.getObjectType(e))return!1;var r=Object.getPrototypeOf(e);return null===r||r===Object.getPrototypeOf({})},i.promise=n("Promise"),i.propertyOf=function(e,t,r){if(!i.object(e)||!t)return!1;var n=e[t];return i.function(r)?r(n):i.defined(n)},i.regexp=n("RegExp"),i.set=n("Set"),i.string=o("string"),i.symbol=o("symbol"),i.undefined=o("undefined"),i.weakMap=n("WeakMap"),i.weakSet=n("WeakSet"),t.default=i},function(e,t,r){e.exports=function(){"use strict";var e="millisecond",t="second",r="minute",n="hour",o="day",i="week",s="month",a="quarter",u="year",c="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,f=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},p={s:d,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),o=r%60;return(t<=0?"+":"-")+d(n,2,"0")+":"+d(o,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),o=t.clone().add(n,s),i=r-o<0,a=t.clone().add(n+(i?-1:1),s);return+(-(n+(r-o)/(i?o-a:a-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(l){return{M:s,y:u,w:i,d:o,D:c,h:n,m:r,s:t,ms:e,Q:a}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y="en",b={};b[y]=h;var m=function(e){return e instanceof w},g=function(e,t,r){var n;if(!e)return y;if("string"==typeof e)b[e]&&(n=e),t&&(b[e]=t,n=e);else{var o=e.name;b[o]=e,n=o}return!r&&n&&(y=n),n||!r&&y},v=function(e,t){if(m(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new w(r)},O=p;O.l=g,O.i=m,O.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,$offset:t.$offset})};var w=function(){function d(e){this.$L=this.$L||g(e.locale,null,!0),this.parse(e)}var p=d.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(l);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return O},p.isValid=function(){return!("Invalid Date"===this.$d.toString())},p.isSame=function(e,t){var r=v(e);return this.startOf(t)<=r&&r<=this.endOf(t)},p.isAfter=function(e,t){return v(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<v(e)},p.$g=function(e,t,r){return O.u(e)?this[t]:this.set(r,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,a){var l=this,f=!!O.u(a)||a,d=O.p(e),p=function(e,t){var r=O.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return f?r:r.endOf(o)},h=function(e,t){return O.w(l.toDate()[e].apply(l.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},y=this.$W,b=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case u:return f?p(1,0):p(31,11);case s:return f?p(1,b):p(0,b+1);case i:var v=this.$locale().weekStart||0,w=(y<v?y+7:y)-v;return p(f?m-w:m+(6-w),b);case o:case c:return h(g+"Hours",0);case n:return h(g+"Minutes",1);case r:return h(g+"Seconds",2);case t:return h(g+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(i,a){var l,f=O.p(i),d="set"+(this.$u?"UTC":""),p=(l={},l[o]=d+"Date",l[c]=d+"Date",l[s]=d+"Month",l[u]=d+"FullYear",l[n]=d+"Hours",l[r]=d+"Minutes",l[t]=d+"Seconds",l[e]=d+"Milliseconds",l)[f],h=f===o?this.$D+(a-this.$W):a;if(f===s||f===u){var y=this.clone().set(c,1);y.$d[p](h),y.init(),this.$d=y.set(c,Math.min(this.$D,y.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[O.p(e)]()},p.add=function(e,a){var c,l=this;e=Number(e);var f=O.p(a),d=function(t){var r=v(l);return O.w(r.date(r.date()+Math.round(t*e)),l)};if(f===s)return this.set(s,this.$M+e);if(f===u)return this.set(u,this.$y+e);if(f===o)return d(1);if(f===i)return d(7);var p=(c={},c[r]=6e4,c[n]=36e5,c[t]=1e3,c)[f]||1,h=this.$d.getTime()+e*p;return O.w(h,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=O.z(this),o=this.$locale(),i=this.$H,s=this.$m,a=this.$M,u=o.weekdays,c=o.months,l=function(e,n,o,i){return e&&(e[n]||e(t,r))||o[n].substr(0,i)},d=function(e){return O.s(i%12||12,e,"0")},p=o.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,"0"),MMM:l(o.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:l(o.weekdaysMin,this.$W,u,2),ddd:l(o.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:O.s(i,2,"0"),h:d(1),hh:d(2),a:p(i,s,!0),A:p(i,s,!1),m:String(s),mm:O.s(s,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:n};return r.replace(f,(function(e,t){return t||h[e]||n.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(e,c,l){var f,d=O.p(c),p=v(e),h=6e4*(p.utcOffset()-this.utcOffset()),y=this-p,b=O.m(this,p);return b=(f={},f[u]=b/12,f[s]=b,f[a]=b/3,f[i]=(y-h)/6048e5,f[o]=(y-h)/864e5,f[n]=y/36e5,f[r]=y/6e4,f[t]=y/1e3,f)[d]||y,l?b:O.a(b)},p.daysInMonth=function(){return this.endOf(s).$D},p.$locale=function(){return b[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=g(e,t,!0);return n&&(r.$L=n),r},p.clone=function(){return O.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},d}(),j=w.prototype;return v.prototype=j,[["$ms",e],["$s",t],["$m",r],["$H",n],["$W",o],["$M",s],["$y",u],["$D",c]].forEach((function(e){j[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),v.extend=function(e,t){return e(t,w,v),v},v.locale=g,v.isDayjs=m,v.unix=function(e){return v(1e3*e)},v.en=b[y],v.Ls=b,v}()},function(e,t,r){const{getCashbackBalance:n,getCashbackStatus:o,getCashbackValue:i,getPercentageRule:s,getValidatingCashback:a,groupPurchasesByDate:u}=r(20),{clearNumber:c}=r(8);e.exports={parseCreatePurchase:e=>{const t=JSON.parse(e),r=parseInt(t.value,10)/100,n=o(r),a=s(r,n),u=100*i(r,a);return JSON.stringify({value:t.value,code:t.code,date:new Date(t.date),cashback:c(u),percentage:(100*a).toFixed(2)+"%",status:n})},parsePurchasesResponse:e=>{if(e.length>0){const t=e,r=n(t),o=a(t),i=u(t);return JSON.stringify({balance:r,validation:o,data:i})}return JSON.stringify({balance:0,validation:0,data:[]})},parseUserResponse:(e,{token:t=""})=>{var r;const n=e[0]||{};return JSON.stringify({id:n.id,accessToken:t||"",cpf:n.cpf||"",email:n.email||"",firstname:(null==n||null===(r=n.username)||void 0===r?void 0:r.split(" ")[0])||"",username:n.username||""})}}},function(e,t,r){const n={APPROVED:void 0,DISAPPROVED:void 0,VALIDATING:void 0},o=r(5)(n);e.exports={RULES:n,getCashbackBalance:e=>e.reduce((e,{status:t,cashback:r})=>(t===o.APPROVED&&(e+=+r),e),0),getCashbackStatus:e=>e<=50?o.DISAPPROVED:e>50&&e<=500?o.APPROVED:o.VALIDATING,getCashbackValue:(e,t)=>e*t,getPercentageRule:(e,t)=>t===o.DISAPPROVED?0:e>50&&e<=250?.03:e>250&&e<=500?.05:.08,getValidatingCashback:e=>e.reduce((e,{status:t,cashback:r})=>(t===o.VALIDATING&&(e+=+r),e),0),groupPurchasesByDate:e=>e.slice().sort((e,t)=>e.date>t.date?-1:e.date<t.date?1:0).reduce((e,t)=>e[t.date]?(e[t.date]=[...e[t.date],t],e):(e[t.date]=[t],e),{})}},,function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const{client:i,endpoints:s}=r(10),{parseUserResponse:a}=r(19);t.handler=async({httpMethod:e,body:t},{clientContext:r})=>{if("POST"===e)try{const e=await i(s.createUser,{payload:t});return{statusCode:201,body:JSON.stringify(e)}}catch(e){return{statusCode:400,body:JSON.stringify({error:e.toString()})}}if("GET"===e)try{const{identity:e,user:t}=r,u=await i(s.getUser,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t));return{statusCode:200,body:a(u,e)}}catch(e){return{statusCode:400,body:JSON.stringify({error:e.toString()})}}return{statusCode:405,body:JSON.stringify({error:"The method specified in the request is not allowed"})}}}]));